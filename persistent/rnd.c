/********************************************/
/* Random Number Generator					        */
/* 2018 - Danny Lousberg   					        */
/********************************************/
#include "rnd.h"

// Relatively good rnd generator, but can be somewhat slow
unsigned char rnd()
{
  static unsigned char 	x = 1, y = 1;
  unsigned char			t = ( x^( x<<5 ) ); 

  x = y;

  return y = ( y^( y>>1) )^( t^( t>>3 ) );
}

// Fastest rng I could come up with below, uses a pre-defined table
// and does the limiting for you already (in a crappy, but fast, way)
unsigned char rnd_values[256] = 
{
  120, 56, 45, 223, 52, 13, 77, 23, 194, 246, 244, 90, 
  2, 51, 150, 73, 197, 108, 112, 98, 132, 9, 91, 193, 
  121, 31, 8, 92, 152, 16, 255, 25, 219, 156, 168, 225, 
  232, 113, 101, 171, 205, 227, 242, 5, 209, 237, 86, 
  165, 182, 7, 207, 46, 64, 97, 106, 181, 126, 143, 
  240, 30, 129, 80, 245, 214, 83, 198, 75, 4, 141, 220, 
  145, 161, 88, 135, 175, 208, 34, 58, 149, 131, 44, 
  164, 204, 105, 81, 43, 41, 1, 32, 222, 226, 109, 130, 
  192, 78, 22, 211, 210, 0, 200, 47, 117, 94, 176, 11, 
  102, 48, 87, 157, 27, 160, 93, 39, 138, 178, 29, 177, 
  17, 76, 191, 167, 0, 55, 216, 111, 148, 162, 144, 239, 
  40, 235, 250, 238, 79, 137, 172, 199, 59, 65, 37, 104, 
  57, 139, 125, 36, 234, 49, 107, 89, 12, 114, 166, 67, 20, 
  224, 140, 163, 203, 185, 212, 3, 206, 217, 215, 10, 50, 
  74, 151, 124, 116, 66, 99, 119, 190, 243, 233, 183, 201, 
  188, 147, 95, 153, 26, 96, 154, 19, 195, 103, 252, 63, 54, 
  236, 71, 82, 127, 70, 180, 62, 228, 158, 100, 179, 14, 6, 
  213, 249, 134, 174, 196, 84, 189, 118, 173, 229, 231, 
  136, 33, 115, 253, 38, 128, 53, 142, 61, 248, 230, 110, 
  202, 146, 69, 186, 218, 85, 24, 170, 18, 72, 247, 28, 
  187, 159, 251, 184, 42, 21, 60, 15, 35, 254, 221, 68, 
  241, 169, 123, 155, 122
};
unsigned char next_rnd = 0;

unsigned char fast_rnd(unsigned char limit)
{
  // Yes, not doing the modulo limites the amount of values more than we want
  // But module is super expensive, so...
  return rnd_values[next_rnd++] % limit;
}

unsigned int roamer_homes[4][2] = 
{
  { 56 << 8, 0 },
  { 247 << 8, 0 },
  { 56 << 8, 175 << 8 },
  { 247 << 8, 175 << 8 }
};
